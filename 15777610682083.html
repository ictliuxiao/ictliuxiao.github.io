<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  “永恒之蓝”勒索病毒实战演练 - 刘箫－在线文档库
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="刘箫－在线文档库" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">刘箫－在线文档库</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 刘箫－在线文档库</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>Kali Linux系统</label></li>

          
            <li><a title="Kali Linux VMware安装教程" href="15777277257654.html">Kali Linux VMware安装教程</a></li>
          

      
        <li class="divider"></li>
        <li><label>攻防实战演练</label></li>

          
            <li><a title="“永恒之蓝”勒索病毒实战演练" href="15777610682083.html">“永恒之蓝”勒索病毒实战演练</a></li>
          
            <li><a title="Windows影藏后门账户" href="15778921528695.html">Windows影藏后门账户</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>Kali Linux系统</span></li>
                        
                          <li><a title="Kali Linux VMware安装教程" href="15777277257654.html">Kali Linux VMware安装教程</a></li>
                        

                    
                      <li class="side-title"><span>攻防实战演练</span></li>
                        
                          <li><a title="“永恒之蓝”勒索病毒实战演练" href="15777610682083.html">“永恒之蓝”勒索病毒实战演练</a></li>
                        
                          <li><a title="Windows影藏后门账户" href="15778921528695.html">Windows影藏后门账户</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>“永恒之蓝”勒索病毒实战演练</h1>

<blockquote>
<p>永恒之蓝：2017年5月13日起，全球范围内爆发的基于Windows网络共享协议进行攻击传播的蠕虫恶意代码，不法分子通过改造之前泄露的NSA黑客武器库中“永恒之蓝”攻击程序发起的网络攻击事件。英国、俄罗斯、整个欧洲以及中国国内多个高校校内网、大型企业内网和政府机构专网中招，被勒索支付高额赎金才能解密恢复文件。微软已于2017 年 3 月 14 日发布MS17-010补丁，修复了“永恒之蓝”攻击的系统漏洞。</p>

<h3 id="toc_0">注：本演示环境使用虚拟环境模拟搭建，非真实攻击，请严格遵守国家安全法规！！</h3>

<h4 id="toc_1">实验环境：</h4>

<table>
<thead>
<tr>
<th>角色</th>
<th>操作系统</th>
<th>IP地址</th>
<th>所需工具</th>
</tr>
</thead>

<tbody>
<tr>
<td>攻击机</td>
<td>Kali Linux</td>
<td>192.168.75.130/24</td>
<td>Wcry勒索病毒样本，Metasploit</td>
</tr>
<tr>
<td>靶机</td>
<td>Windows Server 2008 X64</td>
<td>192.168.75.132/24</td>
<td>无</td>
</tr>
</tbody>
</table>

<h4 id="toc_2">攻击流程：</h4>

<h5 id="toc_3">1、在Kali Linux中使用<code>msfconsole</code>运行Metasploit。</h5>

<p><img src="media/15777610682083/GF-wcry-01.png" alt="GF-wcry-01"/></p>

<h5 id="toc_4">2、搜索<code>MS17-010</code>攻击模块。</h5>

<p><img src="media/15777610682083/GF-wcry-02.png" alt="GF-wcry-02"/></p>

<h5 id="toc_5">3、首先使用<code>auxiliary/scanner/smb/smb_ms17_010</code>模块来扫描网络中哪些主机存在永恒之蓝漏洞。</h5>

<p><img src="media/15777610682083/GF-wcry-03.png" alt="GF-wcry-03"/></p>

<h5 id="toc_6">4、设置扫描目标为<code>192.168.75.0/24</code>网段，并设置扫描线程为<code>50</code>，然后开始扫描。</h5>

<p><img src="media/15777610682083/GF-wcry-04.png" alt="GF-wcry-04"/></p>

<h5 id="toc_7">5、发现扫描结果中出现了靶机的IP，说明靶机存在永恒之蓝漏洞。</h5>

<p><img src="media/15777610682083/GF-wcry-05.png" alt="GF-wcry-05"/></p>

<h5 id="toc_8">6、更换攻击模块为之前搜索结果中的<code>exploit/windows/smb/ms17_010_eternalblue</code>，开始对靶机进行渗透。</h5>

<p><img src="media/15777610682083/GF-wcry-06.png" alt="GF-wcry-06"/></p>

<h5 id="toc_9">7、搜索可用攻击载荷。</h5>

<p><img src="media/15777610682083/GF-wcry-07.png" alt="GF-wcry-07"/></p>

<h5 id="toc_10">8、找到载荷<code>windows/x64/meterpreter/bind_tcp</code>，并调用。</h5>

<p><img src="media/15777610682083/GF-wcry-08.png" alt="GF-wcry-08"/><br/>
<img src="media/15777610682083/GF-wcry-09.png" alt="GF-wcry-09"/></p>

<h5 id="toc_11">9、设置攻击源为本机IP，攻击目的为靶机IP，并开始攻击。</h5>

<p><img src="media/15777610682083/GF-wcry-10.png" alt="GF-wcry-10"/></p>

<h5 id="toc_12">10、进入靶机系统后，上传本地的勒索病毒<code>Wcry.exe</code>至靶机磁盘。</h5>

<p><img src="media/15777610682083/GF-wcry-11.png" alt="GF-wcry-11"/></p>

<h5 id="toc_13">11、在靶机上执行勒索病毒，并测试结果，发现所有文件已经被加密勒索。</h5>

<p><img src="media/15777610682083/GF-wcry-12.png" alt="GF-wcry-12"/><br/>
<img src="media/15777610682083/GF-wcry-13.png" alt="GF-wcry-13"/></p>
</blockquote>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15777277257654.html"  title="Previous Post: Kali Linux VMware安装教程">&laquo; Kali Linux VMware安装教程</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15778921528695.html" 
	        title="Next Post: Windows影藏后门账户">Windows影藏后门账户 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15777610682083.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
